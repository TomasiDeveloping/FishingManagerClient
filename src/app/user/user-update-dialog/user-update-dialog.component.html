<ng-container *ngIf="currentUser">
  <h1 mat-dialog-title *ngIf="currentUser.userId > 0">{{currentUser.firstName}} {{currentUser.lastName}} bearbeiten</h1>
  <h1 mat-dialog-title *ngIf="currentUser.userId <= 0">Neuer User hinzufègen</h1>
  <mat-dialog-content>
    <div class="container">
      <div class="buttons" *ngIf="!changeAddress">
        <button id="changePassword" (click)="changeAddress = true" type="button" class="btn btn-secondary">Adresse
          ändern
        </button>
        <button (click)="onChangePassword()" type="button" class="btn btn-secondary">Passwort
          ändern
        </button>
      </div>
      <form *ngIf="changeAddress" [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="firstName">Vorname</label>
            <input id="firstName" type="text" class="form-control" formControlName="firstName">
          </div>
          <div class="form-group col-md-6">
            <label for="lastName">Nachname</label>
            <input id="lastName" type="text" class="form-control" formControlName="lastName">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="email">Email</label>
            <input id="email" type="email" class="form-control" formControlName="email" [readOnly]="isTestMode">
          </div>
          <div class="form-group col-md-6" formGroupName="address">
            <label for="phone">Telefon</label>
            <input id="phone" type="text" class="form-control" formControlName="phone">
          </div>
        </div>
        <ng-container *ngIf="isAdmin">
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="active" formControlName="active">
            <label class="form-check-label" for="active">Aktiv</label>
          </div>
          <div class="form-group">
            <label for="pictureUrl">Bild</label>
            <input type="file" class="form-control-file" id="pictureUrl" formControlName="pictureUrl">
          </div>
        </ng-container>
        <hr>
        <div formGroupName="address">
          <div class="form-group">
            <label for="title">Anrede</label>
            <input id="title" type="text" class="form-control" formControlName="title">
          </div>
          <div class="form-group">
            <label for="street">Strasse</label>
            <input id="street" type="text" class="form-control" formControlName="street">
          </div>
          <div class="form-group">
            <label for="addressAddition">Adresszusatz (optional)</label>
            <input id="addressAddition" type="text" class="form-control" formControlName="addressAddition">
          </div>
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="zip">PLZ</label>
              <input id="zip" type="number" class="form-control" formControlName="zip">
            </div>
            <div class="form-group col-md-6">
              <label for="city">Ort</label>
              <input id="city" type="text" class="form-control" formControlName="city">
            </div>
          </div>
        </div>
        <div class="d-flex justify-content-between">
          <button [disabled]="userForm.invalid" type="submit" class="btn btn-success">Speichern</button>
          <button type="button" class="btn btn-outline-danger" (click)="onCancel(false)">Abbrechen</button>
        </div>
      </form>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions align="end" *ngIf="!changeAddress">
    <button mat-button mat-dialog-close>Schliessen</button>
  </mat-dialog-actions>
</ng-container>
